<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support - eSimphony</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --esimphony-black: #000000;
            --esimphony-white: #FFFFFF;
            --esimphony-red: #FF0000;
            --esimphony-gray: #666666;
            --esimphony-light-gray: #999999;
            --esimphony-card-bg: #FFFFFF;
            --esimphony-shadow: rgba(255, 255, 255, 0.1);
            --esimphony-border: #E5E5E5;
            --esimphony-success: #28a745;
            --esimphony-warning: #ffc107;
            --esimphony-info: #17a2b8;
        }
        
        * {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        
        body {
            background-color: var(--esimphony-black) !important;
            color: var(--esimphony-white);
            overflow-x: hidden;
            padding-bottom: 80px; /* Space for bottom nav */
        }
        
        .support-container {
            min-height: 100vh;
            background-color: var(--esimphony-black);
        }
        
        /* Header Section */
        .header-section {
            padding: 1rem 1rem 0 1rem;
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .back-button {
            background: none;
            border: none;
            color: var(--esimphony-white);
            font-size: 1.5rem;
            padding: 0.5rem;
            margin-right: 1rem;
            cursor: pointer;
            transition: opacity 0.2s ease;
        }
        
        .back-button:hover {
            opacity: 0.7;
        }
        
        .page-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--esimphony-white);
            flex: 1;
        }
        
        /* Main Content */
        .main-content {
            padding: 0 1rem 2rem 1rem;
        }
        
        /* Support Options */
        .support-card {
            background-color: var(--esimphony-card-bg);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 12px var(--esimphony-shadow);
        }
        
        .card-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--esimphony-black);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .card-icon {
            color: var(--esimphony-red);
            font-size: 1.5rem;
        }
        
        .support-option {
            display: flex;
            align-items: center;
            padding: 1.5rem;
            background: #F8F9FA;
            border-radius: 12px;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            color: var(--esimphony-black);
        }
        
        .support-option:last-child {
            margin-bottom: 0;
        }
        
        .support-option:hover {
            background: #E9ECEF;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            color: var(--esimphony-black);
            text-decoration: none;
        }
        
        .option-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--esimphony-red), #FF6B6B);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1.5rem;
            color: white;
            font-size: 1.5rem;
        }
        
        .option-content {
            flex: 1;
        }
        
        .option-title {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--esimphony-black);
            margin-bottom: 0.5rem;
        }
        
        .option-description {
            font-size: 0.875rem;
            color: var(--esimphony-gray);
            line-height: 1.4;
        }
        
        .option-status {
            font-size: 0.75rem;
            color: var(--esimphony-success);
            font-weight: 600;
            margin-top: 0.25rem;
        }
        
        .option-arrow {
            color: var(--esimphony-gray);
            font-size: 1.25rem;
        }
        
        /* FAQ Section */
        .faq-item {
            border-bottom: 1px solid var(--esimphony-border);
            margin-bottom: 0;
        }
        
        .faq-question {
            padding: 1.5rem 0;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }
        
        .faq-question:hover {
            color: var(--esimphony-red);
        }
        
        .question-text {
            font-weight: 600;
            color: var(--esimphony-black);
            flex: 1;
        }
        
        .faq-question:hover .question-text {
            color: var(--esimphony-red);
        }
        
        .faq-toggle {
            color: var(--esimphony-gray);
            transition: transform 0.2s ease;
        }
        
        .faq-toggle.expanded {
            transform: rotate(180deg);
            color: var(--esimphony-red);
        }
        
        .faq-answer {
            display: none;
            padding: 0 0 1.5rem 0;
            color: var(--esimphony-gray);
            line-height: 1.6;
        }
        
        .faq-answer.expanded {
            display: block;
        }
        
        .faq-answer h4 {
            color: var(--esimphony-black);
            font-size: 1rem;
            font-weight: 600;
            margin: 1rem 0 0.5rem 0;
        }
        
        .faq-answer ul {
            margin: 0.5rem 0;
            padding-left: 1.5rem;
        }
        
        .faq-answer li {
            margin-bottom: 0.25rem;
        }
        
        /* Search Box */
        .search-box {
            position: relative;
            margin-bottom: 1.5rem;
        }
        
        .search-input {
            width: 100%;
            padding: 1rem 1rem 1rem 3rem;
            border: 2px solid var(--esimphony-border);
            border-radius: 12px;
            background-color: #F8F9FA;
            color: var(--esimphony-black);
            font-size: 1rem;
            transition: all 0.2s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--esimphony-red);
            box-shadow: 0 0 0 3px rgba(255, 0, 0, 0.1);
        }
        
        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--esimphony-gray);
            font-size: 1.125rem;
        }
        
        /* Chat Widget Placeholder */
        .chat-widget {
            position: fixed;
            bottom: 100px;
            right: 1rem;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--esimphony-red), #FF6B6B);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(255, 0, 0, 0.3);
            transition: all 0.2s ease;
            z-index: 1001;
        }
        
        .chat-widget:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 0, 0, 0.4);
        }
        
        .chat-expanded {
            position: fixed;
            bottom: 100px;
            right: 1rem;
            width: 300px;
            height: 400px;
            background: var(--esimphony-card-bg);
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            display: none;
        }
        
        .chat-expanded.show {
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            padding: 1rem;
            background: linear-gradient(135deg, var(--esimphony-red), #FF6B6B);
            color: white;
            border-radius: 16px 16px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-title {
            font-weight: 600;
        }
        
        .chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.25rem;
            cursor: pointer;
        }
        
        .chat-body {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            background: #F8F9FA;
        }
        
        .chat-message {
            margin-bottom: 1rem;
            padding: 0.75rem;
            border-radius: 12px;
            max-width: 80%;
        }
        
        .chat-message.support {
            background: var(--esimphony-card-bg);
            color: var(--esimphony-black);
            margin-right: auto;
        }
        
        .chat-message.user {
            background: var(--esimphony-red);
            color: white;
            margin-left: auto;
        }
        
        .chat-input-container {
            padding: 1rem;
            border-top: 1px solid var(--esimphony-border);
            background: var(--esimphony-card-bg);
            border-radius: 0 0 16px 16px;
        }
        
        .chat-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--esimphony-border);
            border-radius: 8px;
            font-size: 0.875rem;
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--esimphony-card-bg);
            border-top: 1px solid var(--esimphony-border);
            padding: 0.75rem 0;
            z-index: 1000;
        }
        
        .nav-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--esimphony-gray);
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.2s ease;
            min-width: 60px;
        }
        
        .nav-item.active {
            color: var(--esimphony-red);
        }
        
        .nav-item:hover {
            color: var(--esimphony-red);
            text-decoration: none;
        }
        
        .nav-icon {
            font-size: 1.25rem;
            margin-bottom: 0.25rem;
        }
        
        .nav-item span {
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        /* Responsive Design */
        @media (max-width: 576px) {
            .chat-expanded {
                right: 0.5rem;
                left: 0.5rem;
                width: auto;
            }
            
            .option-icon {
                width: 50px;
                height: 50px;
                font-size: 1.25rem;
                margin-right: 1rem;
            }
            
            .support-option {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="support-container">
        <!-- Header Section -->
        <div class="header-section">
            <button class="back-button" onclick="goBack()" aria-label="Go back">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h1 class="page-title">Help & Support</h1>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Support Options -->
            <div class="support-card">
                <h2 class="card-title">
                    <i class="fas fa-headset card-icon"></i>
                    Get Help
                </h2>
                
                <div class="support-option" onclick="openChat()">
                    <div class="option-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <div class="option-content">
                        <div class="option-title">Send Us a Message</div>
                        <div class="option-description">Chat with our support team for personalized help</div>
                        <div class="option-status">• Online now</div>
                    </div>
                    <i class="fas fa-chevron-right option-arrow"></i>
                </div>
                
                <div class="support-option" onclick="scrollToFAQ()">
                    <div class="option-icon">
                        <i class="fas fa-question-circle"></i>
                    </div>
                    <div class="option-content">
                        <div class="option-title">Browse FAQ</div>
                        <div class="option-description">Find answers to frequently asked questions</div>
                        <div class="option-status">• 50+ articles available</div>
                    </div>
                    <i class="fas fa-chevron-right option-arrow"></i>
                </div>
            </div>
            
            <!-- FAQ Section -->
            <div class="support-card" id="faqSection">
                <h2 class="card-title">
                    <i class="fas fa-book card-icon"></i>
                    Frequently Asked Questions
                </h2>
                
                <!-- Search Box -->
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" placeholder="Search FAQ..." id="faqSearch" onkeyup="searchFAQ()">
                </div>
                
                <!-- FAQ Categories -->
                <div id="faqList">
                    <!-- Getting Started -->
                    <div class="faq-item" data-category="getting-started">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <span class="question-text">How do I activate my eSIM?</span>
                            <i class="fas fa-chevron-down faq-toggle"></i>
                        </div>
                        <div class="faq-answer">
                            <h4>eSIM Activation Steps:</h4>
                            <ul>
                                <li>Go to your device's cellular settings</li>
                                <li>Select "Add Cellular Plan" or "Add eSIM"</li>
                                <li>Scan the QR code provided in your activation email</li>
                                <li>Follow the on-screen prompts to complete setup</li>
                                <li>Enable data roaming for international use</li>
                            </ul>
                            <p>For detailed platform-specific instructions, visit our <a href="esim-settings.html">eSIM Settings</a> page.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item" data-category="getting-started">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <span class="question-text">What devices support eSIM?</span>
                            <i class="fas fa-chevron-down faq-toggle"></i>
                        </div>
                        <div class="faq-answer">
                            <h4>Compatible Devices:</h4>
                            <p><strong>iOS Devices:</strong> iPhone XS and later, iPad Pro (3rd gen) and later, iPad Air (3rd gen) and later, iPad mini (5th gen) and later</p>
                            <p><strong>Android Devices:</strong> Google Pixel 3 and later, Samsung Galaxy S20 and later, OnePlus 7T and later, and many more</p>
                            <p><strong>Windows Laptops:</strong> Many Surface Pro and other laptops with cellular connectivity</p>
                            <p>Check your device settings to confirm eSIM support before purchasing.</p>
                        </div>
                    </div>
                    
                    <!-- Plans & Billing -->
                    <div class="faq-item" data-category="plans-billing">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <span class="question-text">What's the difference between Prepaid, PAYG, and Subscription plans?</span>
                            <i class="fas fa-chevron-down faq-toggle"></i>
                        </div>
                        <div class="faq-answer">
                            <h4>Plan Types Explained:</h4>
                            <p><strong>Prepaid:</strong> Fixed data allowance for a specific period (e.g., 5GB for 30 days). Best for predictable usage.</p>
                            <p><strong>Pay-As-You-Go (PAYG):</strong> Pay only for data you use at per-MB rates. Ideal for light, occasional usage.</p>
                            <p><strong>Subscription:</strong> Monthly recurring plans with auto-renewal. Perfect for regular travelers or extended stays.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item" data-category="plans-billing">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <span class="question-text">How do I top up my account balance?</span>
                            <i class="fas fa-chevron-down faq-toggle"></i>
                        </div>
                        <div class="faq-answer">
                            <p>You can top up your account in several ways:</p>
                            <ul>
                                <li>Credit/Debit Cards (Visa, Mastercard, American Express)</li>
                                <li>Digital Wallets (PayPal, Apple Pay, Google Pay)</li>
                                <li>Bank transfers (for larger amounts)</li>
                            </ul>
                            <p>All payments are processed securely through Stripe with bank-level encryption.</p>
                        </div>
                    </div>
                    
                    <!-- Troubleshooting -->
                    <div class="faq-item" data-category="troubleshooting">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <span class="question-text">My eSIM isn't working. What should I do?</span>
                            <i class="fas fa-chevron-down faq-toggle"></i>
                        </div>
                        <div class="faq-answer">
                            <h4>Troubleshooting Steps:</h4>
                            <ul>
                                <li>Ensure your device is connected to WiFi</li>
                                <li>Check that data roaming is enabled</li>
                                <li>Verify the eSIM profile is selected for cellular data</li>
                                <li>Try restarting your device</li>
                                <li>Check if you've exceeded your data allowance</li>
                            </ul>
                            <p>If issues persist, contact our support team with your device model and error details.</p>
                        </div>
                    </div>
                    
                    <!-- Account Management -->
                    <div class="faq-item" data-category="account">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <span class="question-text">How do I change my password?</span>
                            <i class="fas fa-chevron-down faq-toggle"></i>
                        </div>
                        <div class="faq-answer">
                            <p>To change your password:</p>
                            <ul>
                                <li>Go to your <a href="profile.html">Profile</a> page</li>
                                <li>Select "Change Password"</li>
                                <li>Enter your current password</li>
                                <li>Enter and confirm your new password</li>
                                <li>Save changes</li>
                            </ul>
                            <p>Your new password must be at least 6 characters long and contain a mix of letters and numbers.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Contact Information -->
            <div class="support-card">
                <h2 class="card-title">
                    <i class="fas fa-phone card-icon"></i>
                    Other Ways to Reach Us
                </h2>
                
                <div style="padding: 1rem; background: #F8F9FA; border-radius: 12px;">
                    <p style="margin-bottom: 1rem; color: var(--esimphony-gray);">
                        <strong>Email Support:</strong> support@esimphony.com<br>
                        <strong>Response Time:</strong> Within 24 hours<br>
                        <strong>Live Chat:</strong> Available 24/7
                    </p>
                    
                    <p style="margin-bottom: 0; color: var(--esimphony-gray); font-size: 0.875rem;">
                        When contacting support, please include your account email, device model, and a detailed description of your issue for faster assistance.
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Chat Widget -->
    <div class="chat-widget" id="chatWidget" onclick="toggleChat()">
        <i class="fas fa-comments"></i>
    </div>
    
    <!-- Chat Expanded -->
    <div class="chat-expanded" id="chatExpanded">
        <div class="chat-header">
            <div class="chat-title">eSimphony Support</div>
            <button class="chat-close" onclick="closeChat()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="chat-message support">
                Hi! I'm here to help. What can I assist you with today?
            </div>
        </div>
        <div class="chat-input-container">
            <input type="text" class="chat-input" placeholder="Type your message..." id="chatInput" onkeypress="handleChatInput(event)">
        </div>
    </div>
    
    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-container">
            <a href="home-dashboard.html" class="nav-item">
                <div class="nav-icon"><i class="fas fa-home"></i></div>
                <span>Home</span>
            </a>
            <a href="tariff-details.html" class="nav-item">
                <div class="nav-icon"><i class="fas fa-mobile-alt"></i></div>
                <span>Plans</span>
            </a>
            <a href="charges-consumption.html" class="nav-item">
                <div class="nav-icon"><i class="fas fa-chart-bar"></i></div>
                <span>Usage</span>
            </a>
            <a href="profile.html" class="nav-item">
                <div class="nav-icon"><i class="fas fa-user"></i></div>
                <span>Profile</span>
            </a>
        </div>
    </nav>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function goBack() {
            if (document.referrer && (document.referrer.includes('profile.html') || document.referrer.includes('home-dashboard.html'))) {
                window.history.back();
            } else {
                window.location.href = 'profile.html';
            }
        }
        
        function toggleFAQ(element) {
            const faqItem = element.parentNode;
            const answer = faqItem.querySelector('.faq-answer');
            const toggle = faqItem.querySelector('.faq-toggle');
            
            if (answer.classList.contains('expanded')) {
                answer.classList.remove('expanded');
                toggle.classList.remove('expanded');
            } else {
                // Close all other FAQs
                document.querySelectorAll('.faq-answer').forEach(answer => {
                    answer.classList.remove('expanded');
                });
                document.querySelectorAll('.faq-toggle').forEach(toggle => {
                    toggle.classList.remove('expanded');
                });
                
                // Open selected FAQ
                answer.classList.add('expanded');
                toggle.classList.add('expanded');
            }
        }
        
        function searchFAQ() {
            const searchTerm = document.getElementById('faqSearch').value.toLowerCase();
            const faqItems = document.querySelectorAll('.faq-item');
            
            faqItems.forEach(item => {
                const questionText = item.querySelector('.question-text').textContent.toLowerCase();
                const answerText = item.querySelector('.faq-answer').textContent.toLowerCase();
                
                if (questionText.includes(searchTerm) || answerText.includes(searchTerm)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = searchTerm === '' ? 'block' : 'none';
                }
            });
        }
        
        function scrollToFAQ() {
            document.getElementById('faqSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        function openChat() {
            toggleChat();
        }
        
        function toggleChat() {
            const chatWidget = document.getElementById('chatWidget');
            const chatExpanded = document.getElementById('chatExpanded');
            
            if (chatExpanded.classList.contains('show')) {
                closeChat();
            } else {
                chatWidget.style.display = 'none';
                chatExpanded.classList.add('show');
                document.getElementById('chatInput').focus();
            }
        }
        
        function closeChat() {
            const chatWidget = document.getElementById('chatWidget');
            const chatExpanded = document.getElementById('chatExpanded');
            
            chatExpanded.classList.remove('show');
            chatWidget.style.display = 'flex';
        }
        
        function handleChatInput(event) {
            if (event.key === 'Enter') {
                const input = event.target;
                const message = input.value.trim();
                
                if (message) {
                    addChatMessage(message, 'user');
                    input.value = '';
                    
                    // Simulate support response
                    setTimeout(() => {
                        const responses = [
                            "Thank you for your message. Let me help you with that.",
                            "I understand your concern. Can you provide more details?",
                            "That's a great question! Let me check that for you.",
                            "I'd be happy to assist you. Please hold on a moment.",
                            "For immediate assistance with technical issues, you can also check our FAQ section above."
                        ];
                        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                        addChatMessage(randomResponse, 'support');
                    }, 1000 + Math.random() * 2000);
                }
            }
        }
        
        function addChatMessage(message, sender) {
            const chatBody = document.getElementById('chatBody');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}`;
            messageDiv.textContent = message;
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }
        
        // Initialize user metadata for support
        function initializeSupport() {
            const userProfile = localStorage.getItem('userProfile');
            const userEmail = localStorage.getItem('userEmail');
            
            if (userProfile || userEmail) {
                console.log('Support initialized with user context:', {
                    email: userEmail,
                    profile: userProfile ? JSON.parse(userProfile) : null,
                    device: navigator.userAgent,
                    timestamp: new Date().toISOString()
                });
            }
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            initializeSupport();
            
            // Auto-expand first FAQ for demo
            setTimeout(() => {
                const firstFAQ = document.querySelector('.faq-question');
                if (firstFAQ) {
                    toggleFAQ(firstFAQ);
                }
            }, 1000);
        });
        
        // Close chat when clicking outside
        document.addEventListener('click', function(event) {
            const chatExpanded = document.getElementById('chatExpanded');
            const chatWidget = document.getElementById('chatWidget');
            
            if (chatExpanded.classList.contains('show') && 
                !chatExpanded.contains(event.target) && 
                !chatWidget.contains(event.target)) {
                // Don't close when clicking on support options that open chat
                if (!event.target.closest('.support-option')) {
                    closeChat();
                }
            }
        });
    </script>
</body>
</html>